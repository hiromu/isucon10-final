!function(e){function t(t){for(var n,i,l=t[0],o=t[1],c=t[2],d=0,u=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&u.push(s[i][0]),s[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(m&&m(t);u.length;)u.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,l=1;l<a.length;l++){var o=a[l];0!==s[o]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={3:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/packs/";var l=window.webpackJsonp=window.webpackJsonp||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var m=o;r.push([60,0]),a()}({60:function(e,t,a){"use strict";a.r(t);a(20);var n=a(7),s=a(17),r=a(0),i=a.n(r),l=a(3),o=a(4);class c extends i.a.Component{constructor(e){super(e),this.state={}}render(){return i.a.createElement("nav",{className:"navbar is-info",role:"navigation","aria-label":"main navigation"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"navbar-brand"},i.a.createElement(l.b,{className:"navbar-item",to:"/contestant"},"XSUCON Contestant")),i.a.createElement("div",{className:"navbar-menu is-active"},i.a.createElement("div",{className:"navbar-start"},i.a.createElement(l.b,{className:"navbar-item",to:"/contestant"},i.a.createElement("span",{className:"material-icons","aria-hidden":!0},"leaderboard"),"ダッシュボード"),i.a.createElement(l.b,{className:"navbar-item",to:"/contestant/benchmark_jobs"},i.a.createElement("span",{className:"material-icons","aria-hidden":!0},"local_fire_department"),"ベンチマーク"),i.a.createElement(l.b,{className:"navbar-item",to:"/contestant/clarifications"},i.a.createElement("span",{className:"material-icons","aria-hidden":!this.props.unreadNotificationExists,"aria-label":this.props.unreadNotificationExists?"未読あり":""},this.props.unreadNotificationExists?"mark_email_unread":"email"),"質問/サポート"),i.a.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},i.a.createElement("a",{className:"navbar-link"},i.a.createElement("span",{className:"material-icons","aria-hidden":!0},"sticky_note_2"),"ドキュメント"),i.a.createElement("div",{className:"navbar-dropdown"},i.a.createElement("a",{className:"navbar-item",href:"/teams"},"チーム一覧"),i.a.createElement("a",{className:"navbar-item",href:"/"},"パブリックダッシュボード")))),i.a.createElement("div",{className:"navbar-end"},i.a.createElement("div",{className:"navbar-item"},i.a.createElement("div",{className:"media xsu-navbar-contestant"},i.a.createElement("div",{className:"media-left"},i.a.createElement("i",{className:"material-icons"},"person")),i.a.createElement("div",{className:"media-content"},i.a.createElement("p",{className:""},this.props.session.contestant.name),i.a.createElement("div",{className:"level is-size-7 is-mobile"},i.a.createElement("div",{className:"level-left"},this.props.session.team.name),i.a.createElement("div",{className:"level-right"},"(チームID: ",this.props.session.team.id,")"))))),i.a.createElement("div",{className:"navbar-item"},i.a.createElement("div",{className:"buttons"}))))))}renderNavbarLoginButtons(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{className:"button is-light",href:"/session",onClick:this.onLogout.bind(this)},"ログアウト"))}onLogout(e){e.preventDefault();const t=document.createElement("form");t.method="POST",t.action="/session",document.body.appendChild(t);const a=document.createElement("input");a.type="hidden",a.name="_method",a.value="delete",t.appendChild(a),t.submit()}}var m=a(2),d=a(6),u=a.n(d),h=a(23),E=a.n(h),p=a(24),b=a.n(p);u.a.extend(E.a),u.a.extend(b.a);const f=e=>{const t=u()(1e3*e.a.seconds+e.a.nanos/1e6),a=e.b?u()(1e3*e.b.seconds+e.b.nanos/1e6):u()(),n=u.a.duration(a.diff(t));return i.a.createElement("span",null,n.humanize(!1))};var v=a(8),N=a(1);const g={PENDING:"dark",RUNNING:"warning",CANCELLED:"info",FINISHED:"success",ERRORED:"danger"},w=e=>{const t=N.xsuportal.proto.resources.BenchmarkJob.Status[e.status],a=g[t]||"light";return i.a.createElement("span",{className:"tag is-"+a},t)},S=e=>i.a.createElement("table",{className:"table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"ID"),i.a.createElement("th",null,"Score"),i.a.createElement("th",null,"Status"),i.a.createElement("th",null,"Time"),i.a.createElement("th",null,"Duration"))),i.a.createElement("tbody",null,e.list.map((e,t)=>{var a;const n=e.id.toString();return i.a.createElement("tr",{key:n},i.a.createElement("td",null,i.a.createElement(l.b,{to:"/contestant/benchmark_jobs/"+encodeURIComponent(n)},"#",n)),i.a.createElement("td",{className:"has-text-right"},null===(a=e.result)||void 0===a?void 0:a.score),i.a.createElement("td",null,i.a.createElement(w,{status:e.status})),i.a.createElement("td",null,i.a.createElement(v.a,{timestamp:e.createdAt})),i.a.createElement("td",null,i.a.createElement(f,{a:e.createdAt,b:e.finishedAt})))})));var C=a(12);const y=e=>{const[t,a]=i.a.useState(null),[n,s]=i.a.useState(!1),[r,l]=i.a.useState(null),{register:c,handleSubmit:d,watch:u,setValue:h,errors:E}=Object(C.a)({defaultValues:{targetHostname:window.localStorage.getItem("xsuportal-last-target-hostname")||""}}),p=d(async t=>{try{s(!0);const n=await e.client.enqueueBenchmarkJob({targetHostname:t.targetHostname});try{window.localStorage.setItem("xsuportal-last-target-hostname",t.targetHostname)}catch(e){console.warn(e)}a(i.a.createElement(o.a,{push:!0,to:{pathname:"/contestant/benchmark_jobs/"+encodeURIComponent(n.job.id.toString())}}))}catch(e){l(e),s(!1)}});return i.a.createElement("div",{className:"card mt-5"},t,i.a.createElement("div",{className:"card-content"},i.a.createElement("form",{onSubmit:p},i.a.createElement("div",{className:"field has-addons"},i.a.createElement("div",{className:"control is-expanded"},i.a.createElement("input",{className:"input is-fullwidth",type:"text",name:"targetHostname",placeholder:"target hostname",ref:c})),i.a.createElement("div",{className:"control"},i.a.createElement("button",{className:"button is-primary",type:"submit",disabled:n},"Enqueue"))),i.a.createElement("p",{className:"is-size-7"},"ベンチ対象サーバーを選択して Enqueue してください。最終計測には最後に利用したサーバーが利用されます。"),r?i.a.createElement(m.a,{error:r}):null)))};class I extends i.a.Component{constructor(e){super(e),this.state={list:null,error:null}}componentDidMount(){this.updateList()}async updateList(){try{const e=await this.props.client.listBenchmarkJobs();this.setState({list:e})}catch(e){this.setState({error:e})}}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.d,null,i.a.createElement(o.b,{exact:!0,path:"/contestant/benchmark_jobs"},i.a.createElement("header",null,i.a.createElement("h1",{className:"title is-1"},"Benchmark Jobs")),i.a.createElement("main",null,this.renderForm(),this.renderError(),this.renderList()))))}renderError(){if(this.state.error)return i.a.createElement(m.a,{error:this.state.error})}renderForm(){return i.a.createElement(y,{session:this.props.session,client:this.props.client})}renderList(){return this.state.list?i.a.createElement(S,{list:this.state.list.jobs}):i.a.createElement("p",null,"Loading...")}}const L=e=>{const{job:t}=e;return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",null,((e,t)=>i.a.createElement("div",{className:"card mt-5"},i.a.createElement("header",{className:"card-header"},i.a.createElement("h4",{className:"is-4 card-header-title"},"Summary")),i.a.createElement("div",{className:"card-content"},i.a.createElement("p",null,i.a.createElement("b",null,"ID:")," ",e.id),i.a.createElement("p",null,i.a.createElement("b",null,"Target:")," ",e.targetHostname),i.a.createElement("p",null,i.a.createElement("b",null,"Status:")," ",i.a.createElement(w,{status:e.status})),i.a.createElement("p",null,i.a.createElement("b",null,"Enqueued At:")," ",i.a.createElement(v.a,{timestamp:e.createdAt})),i.a.createElement("p",null,i.a.createElement("b",null,"Updated At:")," ",i.a.createElement(v.a,{timestamp:e.updatedAt})),i.a.createElement("p",null,i.a.createElement("b",null,"Started At:")," ",e.startedAt?i.a.createElement(v.a,{timestamp:e.startedAt}):"N/A"),i.a.createElement("p",null,i.a.createElement("b",null,"Finished At:")," ",e.finishedAt?i.a.createElement(v.a,{timestamp:e.finishedAt}):"N/A"))))(t,e.admin),e.admin?(a=t.team,i.a.createElement("div",{className:"card mt-5"},i.a.createElement("header",{className:"card-header"},i.a.createElement("h4",{className:"is-4 card-header-title"},"Team")),i.a.createElement("div",{className:"card-content"},i.a.createElement("p",null,i.a.createElement(l.b,{to:"/admin/teams/"+encodeURIComponent(a.id.toString())},a.name," (#",a.id.toString(),")"))))):null,(e=>{if(!e.result)return;const{result:t}=e;return i.a.createElement("div",{className:"card mt-5"},i.a.createElement("header",{className:"card-header"},i.a.createElement("h4",{className:"is-4 card-header-title"},"Result")),i.a.createElement("div",{className:"card-content"},i.a.createElement("p",null,t.finished?i.a.createElement("span",{className:"tag is-info"},"Finished"):i.a.createElement("span",{className:"tag is-warning"},"In progress"),t.finished?t.passed?i.a.createElement("span",{className:"tag is-success ml-2"},"Passed"):i.a.createElement("span",{className:"tag is-danger ml-2"},"Failed"):null),i.a.createElement("p",null,i.a.createElement("b",null,"Marked At:")," ",i.a.createElement(v.a,{timestamp:t.markedAt})),i.a.createElement("p",null,i.a.createElement("b",null,"Score:")," ",t.score),t.scoreBreakdown?i.a.createElement("p",null,i.a.createElement("b",null,"Score Breakdown:")," base=",t.scoreBreakdown.raw,", deduction=",t.scoreBreakdown.deduction):null))})(t),((e,t)=>{if(!e.result)return;const a=e.result;return i.a.createElement("div",{className:"card mt-5"},i.a.createElement("header",{className:"card-header"},i.a.createElement("h4",{className:"is-4 card-header-title"},"Conclusion")),i.a.createElement("div",{className:"card-content"},i.a.createElement("p",null,i.a.createElement("b",null,"Reason:")," ",a.reason)))})(t,e.admin)));var a};var k=a(18);class x extends i.a.Component{constructor(e){super(e),this.state={job:null,error:null,requesting:!1}}componentDidMount(){this.updateJob()}componentDidUpdate(e,t){e!==this.props&&this.updateJob()}async updateJob(){if(!this.state.requesting)try{this.setState({requesting:!0});const e=await this.props.client.getBenchmarkJob(this.props.id);this.setState({job:e.job,requesting:!1,error:null})}catch(e){this.setState({error:e,requesting:!1})}}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("header",null,i.a.createElement("div",{className:"level"},i.a.createElement("div",{className:"level-left"},i.a.createElement("h1",{className:"title is-1"},"Job #",this.props.id)),i.a.createElement("div",{className:"level-right"},i.a.createElement(k.a,{requesting:this.state.requesting,onClick:this.updateJob.bind(this)})))),i.a.createElement("main",null,this.renderError(),this.renderJob()))}renderError(){if(this.state.error)return i.a.createElement(m.a,{error:this.state.error})}renderJob(){return this.state.job?i.a.createElement(i.a.Fragment,null,i.a.createElement(L,{job:this.state.job,admin:!1})):i.a.createElement("p",null,"Loading...")}}var A=a(15);const O=e=>{const[t,a]=i.a.useState(!1),[n,s]=i.a.useState(null),{reset:r,register:l,handleSubmit:o,watch:c,setValue:d,errors:u}=Object(C.a)({shouldUnregister:!1,defaultValues:{question:""}}),h=o(async(t,n)=>{try{a(!0);const s=await e.client.requestClarification({question:t.question});e.onSubmit(s.clarification),n.target.reset(),a(!1)}catch(n){s(n),a(!1)}});return i.a.createElement("div",{className:"card mt-5"},i.a.createElement("div",{className:"card-header"},i.a.createElement("h4",{className:"is-4 card-header-title"},"質問もしくはサポート依頼を送信する")),i.a.createElement("div",{className:"card-content"},i.a.createElement("form",{onSubmit:h},i.a.createElement("div",{className:"field"},i.a.createElement("label",{className:"label",htmlFor:"ContestantClarificationList-question"},"質問内容"),i.a.createElement("div",{className:"control"},i.a.createElement("textarea",{className:"textarea",name:"question",id:"ContestantClarificationList-question",ref:l,placeholder:"",autoFocus:!0}))),i.a.createElement("div",{className:"field"},i.a.createElement("div",{className:"control"},i.a.createElement("button",{className:"button is-primary",type:"submit",disabled:t},"送信"))),n?i.a.createElement(m.a,{error:n}):null)))},j=e=>{const[t,a]=i.a.useState(null),[n,s]=i.a.useState(null);i.a.useEffect(()=>{e.client.listClarifications().then(e=>s(e.clarifications)).catch(e=>a(e))},[]);i.a.useEffect(()=>{var t;if(!n)return;const a=n.find(e=>e.answered);e.onLastClarificationIdSeenChange(null!==(t=null==a?void 0:a.id)&&void 0!==t?t:void 0)},[n]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(O,{session:e.session,client:e.client,onSubmit:e=>{s(n?[e,...n]:[e])}}),t?i.a.createElement(m.a,{error:t}):null,n?n?n.map(e=>i.a.createElement(A.a,{clarification:e,admin:!1,key:e.id.toString()})):null:i.a.createElement("p",null,"Loading.."))};var q=a(21),F=a(22),_=a(26),J=a(25);const P=e=>{const[t,a]=i.a.useState(void 0);if(!("serviceWorker"in navigator))return i.a.createElement(i.a.Fragment,null);if(!("Notification"in window))return i.a.createElement(i.a.Fragment,null);const n=e.serviceWorker;return i.a.useEffect(()=>{n&&n.pushManager.getSubscription().then(e=>a(e)).catch(e=>console.warn("getSubscription failed:",e))},[n]),n?void 0===t?i.a.createElement(i.a.Fragment,null):i.a.createElement(D,Object.assign({},e,{serviceWorker:n,pushSubscription:t})):i.a.createElement(i.a.Fragment,null)},D=e=>{const[t,a]=i.a.useState(e.pushSubscription);if(t||e.localNotificationEnabled){const n=async n=>{if(n.preventDefault(),t){try{await e.client.unsubscribeNotification(t)}catch(n){console.error("Unsubscribe API failed",n)}t.unsubscribe(),a(null)}e.setLocalNotificationEnabled(!1)};return i.a.createElement("button",{className:"button is-small",onClick:n},i.a.createElement("span",{className:"material-icons","aria-label":"通知を無効にする"},"notifications_active"))}{const t=async t=>{t.preventDefault();try{const e=await Notification.requestPermission();if("denied"===e)return void alert("ブラウザで通知が拒否されているため有効にできません");if("default"===e)return void alert("通知が許可されませんでした (有効にできません)")}catch(t){console.error("requestPermission failure",t),alert("requestPermission failure")}e.setLocalNotificationEnabled(!0);try{if(e.session.pushVapidKey&&e.session.pushVapidKey.length>0){const t=await e.serviceWorker.pushManager.subscribe({applicationServerKey:e.session.pushVapidKey,userVisibleOnly:!0});await e.client.subscribeNotification(t),a(t)}}catch(t){if(console.error("Failed to subscribe",t),t instanceof n.b&&503==t.status)return;alert("Failed to subscribe")}};return i.a.createElement("button",{className:"button is-small",onClick:t},"通知を有効にする",i.a.createElement("span",{className:"material-icons","aria-hidden":!0},"notifications_none"))}},W=e=>{var t;const{session:a,client:n}=e,[s,r]=i.a.useState(!1),[o,c]=i.a.useState(!1),[d,u]=i.a.useState(null),[h,E]=i.a.useState(null),[p,b]=i.a.useState(null),[f,v]=i.a.useState(new q.a),[N,g]=i.a.useState(f.all());f.onChange=g;const w=()=>{if(!s)return r(!0),n.getContestantDashboard().then(e=>{u(e),b(null),r(!1)}).catch(e=>{b(e),r(!1)})},C=()=>{if(!o)return c(!0),n.listBenchmarkJobs().then(e=>{E(e.jobs.slice(0,5)),b(null),c(!1)}).catch(e=>{b(e),c(!1)})},I=()=>{w(),C()};return i.a.useEffect(()=>{d||w()},[d]),i.a.useEffect(()=>{h||C()},[h]),i.a.useEffect(()=>{const e=setInterval(()=>I(),1e4);return()=>clearInterval(e)},[]),d&&h?i.a.createElement(i.a.Fragment,null,p?i.a.createElement(m.a,{error:p}):null,i.a.createElement("section",{className:""},i.a.createElement("div",{className:"level"},i.a.createElement("div",{className:"level-left"},i.a.createElement(F.a,{contest:a.contest})),i.a.createElement("div",{className:"level-right has-text-right"},i.a.createElement("div",{className:"mr-1"},i.a.createElement(P,{session:a,client:n,serviceWorker:e.serviceWorker,localNotificationEnabled:e.localNotificationEnabled,setLocalNotificationEnabled:e.setLocalNotificationEnabled})),i.a.createElement(k.a,{requesting:s||o,onClick:I})))),i.a.createElement("section",{className:"is-fullwidth py-5 is-hidden-touch"},i.a.createElement(_.a,{teams:null===(t=null==d?void 0:d.leaderboard)||void 0===t?void 0:t.teams,contest:a.contest,teamId:a.team.id,teamPins:N})),i.a.createElement("div",{className:"columns"},i.a.createElement("div",{className:"column is-7 px-5"},i.a.createElement("section",{className:"py-5"},i.a.createElement("p",{className:"title"}," Leaderboard "),i.a.createElement(J.a,{leaderboard:null==d?void 0:d.leaderboard,teamId:a.team.id,teamPins:N,onPin:f.set}))),i.a.createElement("div",{className:"column is-5 px-5"},i.a.createElement("section",{className:"py-5"},i.a.createElement("p",{className:"title"}," Job Enqueue Form "),i.a.createElement(y,{session:a,client:n})),i.a.createElement("section",{className:"py-5"},i.a.createElement("p",{className:"title"}," Job List "),i.a.createElement("p",null,i.a.createElement(l.b,{to:"/contestant/benchmark_jobs"},"Show All")),i.a.createElement(S,{list:h}))))):i.a.createElement(i.a.Fragment,null,p?i.a.createElement(m.a,{error:p}):null,i.a.createElement("p",null,"Loading..."))};class B{constructor(e){this.client=e,this.last=void 0,this.requesting=!1}start(){this.timer||(console.log("ContestantNotificationsObserver: start"),this.poll(),this.timer=window.setInterval(this.poll.bind(this),2e4))}shutdown(){this.timer&&(console.log("ContestantNotificationsObserver: shutdown"),window.clearInterval(this.timer))}async poll(){if(!this.requesting){try{this.requesting=!0;const e=await this.client.listNotifications(this.last),t=0===e.lastAnsweredClarificationId?void 0:e.lastAnsweredClarificationId;t!==this.lastAnsweredClarificationId&&this.onLastAnsweredClarificationIdChange&&(console.log("ContestantNotificationsObserver: lastAnsweredClarificationId change",t),this.onLastAnsweredClarificationIdChange(t)),this.lastAnsweredClarificationId=t,e.notifications.length>0&&this.onNewNotifications&&(console.log("ContestantNotificationsObserver: observed newNotifications",e.notifications),this.onNewNotifications(e.notifications));const a=e.notifications[e.notifications.length-1];this.last=(null==a?void 0:a.id)||this.last}catch(e){console.error("ContestantNotificationsObserver: error while polling",e),this.requesting=!1}this.requesting=!1}}}class M extends i.a.Component{constructor(e){super(e);const t=new B(this.props.client);t.onLastAnsweredClarificationIdChange=this.onLastAnsweredClarificationIdChange.bind(this),t.onNewNotifications=this.onNewNotifications.bind(this),this.state={notificationObserver:t,lastAnsweredClarificationIdObserved:!1,lastClarificationIdSeen:this.getLastClarificationIdSeen(),localNotificationEnabled:this.getLocalNotificationEnabled(),serviceWorker:null}}getLastClarificationIdSeen(){const e=window.localStorage.getItem("xsuportal-contestantLastClarificationIdSeen");if(e)return parseInt(e,10)}getLocalNotificationEnabled(){return"Notification"in window?"denied"===window.Notification.permission?(console.warn("getLocalNotificationEnabled: Notification permission denied"),this.setLocalNotificationEnabled(!1),!1):"1"===window.localStorage.getItem("xsuportal-contestantLocalNotificationEnabled"):(console.warn("getLocalNotificationEnabled: No notification support"),this.setLocalNotificationEnabled(!1),!1)}setLocalNotificationEnabled(e){console.log("setLocalNotificationEnabled:",e);try{e?window.localStorage.setItem("xsuportal-contestantLocalNotificationEnabled","1"):window.localStorage.removeItem("xsuportal-contestantLocalNotificationEnabled")}catch(e){console.warn(e)}this.setState({localNotificationEnabled:e})}componentDidMount(){"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW:",e);const t=window.localStorage.getItem("xsuportal-swRelease");void 0!==t&&this.props.release!==t&&(console.log("Attempt to update sw"),e.update());try{window.localStorage.setItem("xsuportal-swRelease",this.props.release||"")}catch(e){console.warn(e)}this.setState({serviceWorker:e}),this.state.notificationObserver.start()}).catch(e=>{console.warn("Cannot register SW: ",e),this.state.notificationObserver.start()}):this.state.notificationObserver.start()}componentWillUnmount(){this.state.notificationObserver.shutdown()}onLastAnsweredClarificationIdChange(e){this.setState({lastAnsweredClarificationIdObserved:!0,lastAnsweredClarificationId:e,lastClarificationIdSeen:this.getLastClarificationIdSeen()})}onLastClarificationIdSeenChange(e){try{e?window.localStorage.setItem("xsuportal-contestantLastClarificationIdSeen",e.toString()):window.localStorage.removeItem("xsuportal-contestantLastClarificationIdSeen")}catch(e){console.warn(e)}this.setState({lastClarificationIdSeen:e})}onNewNotifications(e){var t;if(console.log({localNotificationEnabled:this.state.localNotificationEnabled}),!this.state.localNotificationEnabled)return;const a=null===(t=this.state.serviceWorker)||void 0===t?void 0:t.active;console.log({worker:a}),a&&a.postMessage({kind:"localNotification",notifications:e})}render(){return i.a.createElement(l.a,null,i.a.createElement(c,{session:this.props.session,client:this.props.client,unreadNotificationExists:this.state.lastAnsweredClarificationIdObserved&&this.state.lastClarificationIdSeen!==this.state.lastAnsweredClarificationId}),i.a.createElement("div",{className:"container mt-5"},i.a.createElement(o.d,null,i.a.createElement(o.b,{exact:!0,path:"/contestant",render:({match:e})=>i.a.createElement(W,{session:this.props.session,client:this.props.client,serviceWorker:this.state.serviceWorker,localNotificationEnabled:this.state.localNotificationEnabled,setLocalNotificationEnabled:this.setLocalNotificationEnabled.bind(this)})}),i.a.createElement(o.b,{exact:!0,path:"/contestant/benchmark_jobs",render:({match:e})=>i.a.createElement(I,{session:this.props.session,client:this.props.client})}),i.a.createElement(o.b,{path:"/contestant/benchmark_jobs/:id",render:({match:e})=>i.a.createElement(x,{session:this.props.session,client:this.props.client,id:e.params.id})}),i.a.createElement(o.b,{exact:!0,path:"/contestant/clarifications",render:({match:e})=>i.a.createElement(j,{session:this.props.session,client:this.props.client,onLastClarificationIdSeenChange:this.onLastClarificationIdSeenChange.bind(this)})}))))}}var R=a(16),U=a.n(R);!async function(){var e;const t=new n.a,a=await t.getCurrentSession(),r=null===(e=document.querySelector('meta[name="xsu:release"]'))||void 0===e?void 0:e.content;Object(s.b)(a);const l=document.getElementById("app");a.team?U.a.render(i.a.createElement(M,{session:a,client:t,release:r}),l):location.href="/"}()}});
//# sourceMappingURL=contestant.js.map